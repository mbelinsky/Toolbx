<% categories = Category.all %>
<% docked ||= false %>
<menu id="filter" class="<%= 'docked' if docked %>">
	<form action="">
		<select name="category_ids[]" class="category-select" multiple>
			<% categories.each do |category| %>
				<% selected = params[:category_ids] && params[:category_ids].include?(category.id.to_s) %>
				<option value="<%= category.id %>" <%= 'selected' if selected %>><%= category.title %></option>
			<% end %>
		</select>

		<ul class="categories">
			<% categories.each do |category| %>
				<% active = params[:category_ids] && params[:category_ids].include?(category.id.to_s) %>
				<li data-category-id="<%= category.id %>" class="<%= category.title.parameterize %> <%= 'active' if active %>"></li>
			<% end %>
		</ul>

		<input name="keyword" class="keyword" value="<%= params[:keyword] %>" placeholder="Filter by keyword">

		<div class="select-container">
			<select name="order">
				<% @orders.each do |order, val| %>
					<option <%= 'selected' if params[:order] == order %>><%= order %></option>
				<% end %>
			</select>

			<div class="trigger"></div>
		</div>
	</form>
</menu>